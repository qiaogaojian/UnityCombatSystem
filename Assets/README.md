**????????**

1. **????????**
    - `GameApp` ??????????????????????????????????????????
    - ??UI???????????????????????????

2. **????**
    - `FightMgr` ?????????????????????????????
    - ????`LoadAndGotoMap`????????`OnProcessSkill`?`OnProcessBuff`??????????

3. **????**
    - `GM_Charactor` ??????????????????????????
    - ????`StartSkill`?`StartBuff`??????????`OnLoseHp`??????????

4. **?????**
    - `SkillTimeLine` ??????????????????????????????
    - `StartSkill`??????????`OnUpdate`??????????

5. **????**
    - `GM_SkillMgr` ????????????????????????????????
    - `GetSkillTimeNode`????????????`GetSkillConfig`???????

**????**

```csharp
// ??????Weapon ?????? Sword ?
public class Weapon {
    public virtual void Attack() {
        Debug.Log("Attacking with a weapon");
    }
}

public class Sword : Weapon {
    public override void Attack() {
        Debug.Log("Sword attack!");
    }
}

// ??????? Attack ??
Weapon weapon = new Sword();
weapon.Attack();  // ?? "Sword attack!"
```

**??**?
- ??????????????`Sword` ???? `Weapon` ????? `Attack` ???
- ?? `Sword` ???????? `Weapon` ????? `weapon`?
- ?? `weapon.Attack()` ?????????????? `Sword` ?? `Attack` ???




**????????**

1. **????**
   - ?????????????????????`GM_SkillMgr`????????`FightMgr`???????`GM_Charactor`???????????????????

2. **?????**
   - `GameApp` ???? `Init()` ???????????????????????????? `EventMgr` ???????????????????
   - ?????????UI?????????Buff????

3. **??????**
   - ?? `FightMgr.LoadAndGotoMap()` ???????????????????????????????????????????????????????

4. **????**
   - `GM_Charactor` ??? `StartSkill(int skillId)` ???????????????? `SkillTimeLine` ???????????
   - ???????? `Init`?`Begin`?`Calc`??????????????????????

   ??????????????"Fireball"??? `SkillTimeLine` ????????????"??"?"??"??????

5. **?????**
   - ?????? `SkillTimeLine` ? `SkillTimeNode` ??????????????????????????????????????????“????”?“????”?“????”??

   ???? `OnUpdate` ????????????????? `DefaultCalcProcesser` ??????????????

6. **????**
   - `EventMgr` ????????????????????????UI???????????????????????????????????????

7. **????**
   - ??????`GM_Charactor` ?? `StartSkill(int skillId)` ??????????ID????? `SkillTimeNode`?????????????? `Init`?`Begin`?`Calc`??
   ```csharp
   public void StartSkill(int skillId)
   {
       if (this.skillTimeLine.StartSkill(this, skillId, () => {
           this.ch.SetState(CharactorState.Idle);
       }))
       {
           this.ch.SetState(CharactorState.Attack);
       }
   }
   ```
   ?????? `skillId` ??????????????????????????????????????

